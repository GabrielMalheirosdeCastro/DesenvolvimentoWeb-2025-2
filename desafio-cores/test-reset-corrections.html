<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª TESTE: CorreÃ§Ãµes de Reset - Jogo de AdivinhaÃ§Ã£o de Cores</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #1e293b;
            color: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            font-size: 12px;
            max-width: 300px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .test-status {
            margin: 5px 0;
            padding: 3px 6px;
            border-radius: 3px;
        }
        .status-running { background: #fbbf24; color: #1e293b; }
        .status-pass { background: #10b981; color: white; }
        .status-fail { background: #ef4444; color: white; }
        .status-waiting { background: #6b7280; color: white; }
    </style>
</head>
<body>
    <div class="test-indicator">
        <strong>ğŸ§ª TESTE DE CORREÃ‡Ã•ES</strong><br>
        <div id="test-status-1" class="test-status status-waiting">Teste 1: Estado Inicial</div>
        <div id="test-status-2" class="test-status status-waiting">Teste 2: ReinÃ­cio AutomÃ¡tico</div>
        <div id="test-status-3" class="test-status status-waiting">Teste 3: BotÃ£o Restart</div>
        <div id="test-overall" class="test-status status-waiting">Status Geral: Aguardando</div>
    </div>

    <!-- Container principal do jogo -->
    <div class="game-container">
        <!-- CabeÃ§alho do jogo -->
        <header class="game-header">
            <h1 class="game-title">ğŸ§ª TESTE: Jogo de AdivinhaÃ§Ã£o de Cores - CorreÃ§Ãµes de Reset</h1>
            <p class="game-instructions">
                <strong>ğŸ§ª MODO TESTE:</strong> Este teste verificarÃ¡ se os problemas de reset foram corrigidos:<br>
                âœ… ReinÃ­cio automÃ¡tico apÃ³s 3 tentativas falhadas<br>
                âœ… BotÃ£o "Jogar Novamente"<br>
                âœ… Reset correto das variÃ¡veis (tentativas, pontuaÃ§Ã£o, etc.)<br><br>
                <em>Acompanhe os testes no console (F12) e no indicador no canto superior direito.</em>
            </p>
        </header>

        <!-- Interface principal do jogo -->
        <main class="game-main">
            <!-- Ãrea de informaÃ§Ãµes do jogo -->
            <div class="game-info">
                <div class="level-selector">
                    <label for="difficulty-select">NÃ­vel de Dificuldade:</label>
                    <select id="difficulty-select" class="difficulty-select">
                        <option value="easy">ğŸŸ¢ FÃ¡cil (10 cores)</option>
                        <option value="medium" disabled>ğŸŸ¡ MÃ©dio (10 cores) - Desbloqueie acertando 3 no fÃ¡cil</option>
                        <option value="hard" disabled>ğŸ”´ DifÃ­cil (10 cores) - Desbloqueie acertando 3 no mÃ©dio</option>
                    </select>
                </div>

                <div class="game-stats">
                    <div class="attempts-counter">
                        <span class="label">Tentativas restantes:</span>
                        <span id="attempts-count" class="count">3</span>
                    </div>
                    
                    <div class="score-display">
                        <span class="label">PontuaÃ§Ã£o:</span>
                        <span id="score-count" class="count">0</span>
                    </div>

                    <div class="level-progress">
                        <span class="label">Acertos no nÃ­vel:</span>
                        <span id="level-progress" class="count">0/3</span>
                    </div>
                </div>
            </div>

            <!-- Ãrea de entrada do jogador -->
            <div class="game-input">
                <div class="input-group">
                    <label for="color-guess" class="input-label">ğŸ¨ Digite sua cor (o fundo mostra preview!):</label>
                    <input 
                        type="text" 
                        id="color-guess" 
                        class="color-input"
                        placeholder="Ex: red, blue, green... (veja a prÃ©via da cor no fundo!)"
                        autocomplete="off"
                        maxlength="30"
                    >
                </div>
                
                <button id="guess-btn" class="btn btn-primary">
                    ğŸ¯ Adivinhar
                </button>
            </div>

            <!-- Ãrea de feedback -->
            <div id="feedback-area" class="feedback-area">
                <p id="feedback-message" class="feedback-message">
                    ğŸ§ª Modo teste ativo! Acompanhe o console para detalhes dos testes.
                </p>
            </div>

            <!-- Dica inteligente -->
            <div id="hint-area" class="hint-area" style="display: none;">
                <p id="hint-message" class="hint-message"></p>
            </div>

            <!-- BotÃµes de controle -->
            <div class="game-controls">
                <button id="restart-btn" class="btn btn-secondary" style="display: none;">
                    ğŸ”„ Jogar Novamente
                </button>
                
                <button id="next-level-btn" class="btn btn-success" style="display: none;">
                    â¬†ï¸ PrÃ³ximo NÃ­vel
                </button>

                <button id="home-btn" class="btn btn-outline">
                    ğŸ  Voltar ao InÃ­cio
                </button>

                <button id="manual-test-btn" class="btn btn-primary" style="margin-top: 10px;">
                    ğŸ§ª Executar Teste Manual
                </button>
            </div>
        </main>

        <!-- HistÃ³rico de partidas -->
        <aside class="game-history">
            <h3>ğŸ“Š EstatÃ­sticas</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Jogos:</span>
                    <span id="total-games" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">VitÃ³rias:</span>
                    <span id="total-wins" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Taxa:</span>
                    <span id="win-rate" class="stat-value">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Recorde:</span>
                    <span id="high-score" class="stat-value">0</span>
                </div>
            </div>
        </aside>
    </div>

    <!-- Scripts -->
    <script type="module" src="script-fixed-visibility.js"></script>
    <script src="test-reset-fixes.js"></script>

    <script>
        // Sistema de atualizaÃ§Ã£o de status dos testes na UI
        window.updateTestStatus = function(testId, status, message) {
            const element = document.getElementById(`test-status-${testId}`);
            if (element) {
                element.className = `test-status status-${status}`;
                element.textContent = message;
            }
        };

        window.updateOverallStatus = function(status, message) {
            const element = document.getElementById('test-overall');
            if (element) {
                element.className = `test-status status-${status}`;
                element.textContent = `Status Geral: ${message}`;
            }
        };

        // BotÃ£o para executar teste manual
        document.addEventListener('DOMContentLoaded', function() {
            const manualTestBtn = document.getElementById('manual-test-btn');
            if (manualTestBtn) {
                manualTestBtn.addEventListener('click', function() {
                    console.log('ğŸ§ª Executando teste manual...');
                    
                    // Reset status
                    updateTestStatus(1, 'waiting', 'Teste 1: Estado Inicial');
                    updateTestStatus(2, 'waiting', 'Teste 2: ReinÃ­cio AutomÃ¡tico');
                    updateTestStatus(3, 'waiting', 'Teste 3: BotÃ£o Restart');
                    updateOverallStatus('running', 'Executando testes...');
                    
                    // Executar testes apÃ³s breve delay
                    setTimeout(() => {
                        // Recarregar o script de teste
                        const script = document.createElement('script');
                        script.src = 'test-reset-fixes.js?t=' + Date.now();
                        document.body.appendChild(script);
                    }, 1000);
                });
            }
        });
    </script>
</body>
</html>